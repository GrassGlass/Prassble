%% The LaTeX project Prassble
%% listings.tex: defining Prassble's listing environments, using our predefined styles
%%
%% -------------------------------------------------------------------------------------------
%% Copyright (c) 2025 by Grass (GrassGlass) <shaohong00002 at gmail dot com>
%% -------------------------------------------------------------------------------------------
%%
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%   http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%%
%% This work has the LPPL maintenance status `author-maintained'.
%%
%% This work consists of all files listed in README
%%
% Listings to print code out verbatim (minted)

    % environments
        % listing environment style
        % Help sourced from https://tex.stackexchange.com/a/748148/383565
        % codestlyenvironment = 
            % #1  { flush or normal: vertical spacing }
            % #2  { ! <=> \BooleanTrue <=> nonumber } 
            % #3  { ' <=> \BooleanTrue <=> autowidth (not accounting for the title's width) } 
            % #4  { " <=> \BooleanTrue <=> autowidth accounting for the title's width } 
            % #5  { alternative title } 
            % #6  { default title } 
            % #7  { IfEmptyF <=> use alternative title }
            % #8  { displayed language name }
        % environmental arguments
            % #1  { ! <=> \BooleanTrue <=> nonumber } 
            % #2  { ' <=> \BooleanTrue <=> autowidth (not accounting for the title's width) } 
            % #3  { " <=> \BooleanTrue <=> autowidth accounting for the title's width } 
            % #4  [ alternative title ]
            % #5  [ additional tcbkeys ] 
            % #6  { IfEmptyF <=> use alternative title #6 }
        \ModifiedNewTCBListing{code}{ t! t' t" O{} O{} m }{
            ,codestyleenvironment = {flush}{#1}{#2}{#3}{#4.}{#6.}{#4}{#6}
            ,#5
        }
        \ModifiedNewTCBListing{code*}{ t! t' t" O{} O{} m }{
            ,codestyleenvironment = {normal}{#1}{#2}{#3}{#4.}{#6.}{#4}{#6}
            ,#5
        }
        \ModifiedNewTCBListing{codeoutput}{ t! t' t" O{} O{} m }{
            ,codestyleenvironment = {flush}{#1}{#2}{#3}{Output (#4).}{Output.}{#4}{#6}
            ,#5
        }
        \ModifiedNewTCBListing{codeoutput*}{ t! t' t" O{} O{} m }{
            ,codestyleenvironment = {normal}{#1}{#2}{#3}{Output (#4).}{Output.}{#4}{#6}
            ,#5
        }

    % Input commands
        % input listing style
        % Help sourced from https://tex.stackexchange.com/a/748148/383565
        % codestyleinput = 
            % #1  { * <=> \BooleanTrue <=> flush vertical spacing }
            % #2  { ! <=> \BooleanTrue <=> nonumber } 
            % #3  { ' <=> \BooleanTrue <=> autowidth (not account for the title's width) } 
            % #4  { " <=> \BooleanTrue <=> autowidth accounting for the title's width } 
            % #5  { alternative title } 
            % #6  { default title } 
            % #7  { IfEmptyF <=> use alternative title }
            % #8  { listing file }
            % #9  { manual minted language }
        % command arguments
            % #2  { ! <=> \BooleanTrue <=> nonumber } 
            % #3  { ' <=> \BooleanTrue <=> autowidth (not account for the title's width) } 
            % #4  { " <=> \BooleanTrue <=> autowidth accounting for the title's width } 
            % #5  [ alternative title ]
            % #6  [ additional tcbkeys ]
            % #7  { listing file }
            % #8  [ manual minted language ]
        \ModifiedNewTCBInputListing{\inputcode}{ s t! t' t" O{} O{} m O{} }{
            ,codestyleinput = {#1}{#2}{#3}{#4}{#5.}{\displayedname.}{#5}{#7}{#8}
            ,#6
        }

        
        \ModifiedNewTCBInputListing{\inputcodeoutput}{ s t! t' t" O{} O{} m O{} }{
            ,codestyleinput = {#1}{#2}{#3}{#4}{Output (#5).}{Output.}{#5}{#7}{#8}
            ,#6
        }

% Inline listing
\NewDocumentCommand{\codeinline}{ O{} m }{\mintinline[#1]{#2}}
\NewDocumentCommand{\TeXinline}{ O{} }{\mintinline[#1]{TeX}}

% Define what displayed langage and Pygments language is to be converted from each file extension
\AddFileExtensionLanguageTriple{jl,txt,tex,tex}{julia,text,tex,latex}{Julia,Text,TeX,LaTeX}