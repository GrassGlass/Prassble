%% The LaTeX project Prassble
%% listings.tex: defining Prassble's listing environments, using our predefined styles
%%
%% -------------------------------------------------------------------------------------------
%% Copyright (c) 2025 by Grass (GrassGlass) <shaohong00002 at gmail dot com>
%% -------------------------------------------------------------------------------------------
%%
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%   http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%%
%% This work has the LPPL maintenance status `author-maintained'.
%%
%% This work consists of all files listed in README
%%
% Colors
\ifdefstring{\ColorTheme}{colourful}{
  \def\ColorCodeBase{Maroon}
  \def\ColorCodeColback{\ColorCodeBase!5}
  \def\ColorCodeColbacktitle{\ColorCodeBase!5}
  \def\ColorCodeTitle{\ColorCodeBase!70!black}
  \def\ColorCodeBorderline{\ColorCodeBase}
  \def\ColorCodeLineNumber{\ColorCodeBase}
  \def\ColorCodeLineNumberBackground{\ColorCodeBase!20}
}{}
\ifdefstring{\ColorTheme}{BnW}{
  \def\ColorCodeBase{black}
  \def\ColorCodeColback{white}
  \def\ColorCodeColbacktitle{white}
  \def\ColorCodeTitle{\ColorCodeBase!70!black}
  \def\ColorCodeBorderline{white}
  \def\ColorCodeLineNumber{\ColorCodeBase}
  \def\ColorCodeLineNumberBackground{\ColorCodeBase!20}
}{}

%* Listings to print code out verbatim (minted)
    % source that informed me of the ={} argument processor of ltcmd: https://tex.stackexchange.com/a/750107/383565

    % environments
        % listing environment style
        % Help sourced from https://tex.stackexchange.com/a/748148/383565
        % codestlyenvironment = 
            % #1    { <displayed language name to be converted to minted language>}
            % #2    { <Unparentisized Title> }
        % environmental arguments
            % #1    [ <OTitle/pgfkeys> ]
            % #2    { <Displayed language> }
        
        \ModifiedNewTCBListing{code}{ D(){middle} ={OTitle} O{} m }{
            ,type in thmgroup = {#1}
            ,codestyleenvironment = {#3}{#3}
            ,#2
        }
        \ModifiedNewTCBListing{codeoutput}{ D(){middle} ={OTitle} O{} m }{
            ,type in thmgroup = {#1}
            ,codestyleenvironment = {#3}{Output}
            ,#2
        }

    % Input commands
        % input listing style
        % Help sourced from https://tex.stackexchange.com/a/748148/383565
        % codestyleinput = 
            % #1    { <Listing file> }
            % #2    { <Unparentisized Title> }
        % command arguments
            % #1    { <vertical space correction, depending on the presence of an asterisk * > }
            % #2    [ <OTitle/pgfkeys> ]
            % #3    { <Listing file> }
        
        \ModifiedNewTCBInputListing{\inputcode}{ D(){middle} ={OTitle} O{} m }{
            ,type in thmgroup = {#1}
            ,codestyleinput = {#3}{\displayedname}
            ,#2
        }

        \ModifiedNewTCBInputListing{\inputcodeoutput}{ D(){middle} ={OTitle} O{} m }{
            ,type in thmgroup = {#1}
            ,codestyleinput = {#3}{Output}
            ,#2
        }

% Inline listing
\NewDocumentCommand{\codeinline}{ O{} m }{\mintinline[#1]{#2}}
\NewDocumentCommand{\TeXinline}{ O{} }{\mintinline[#1]{TeX}}

% Define what displayed langage and Pygments language is to be converted from each file extension
\AddFileExtensionLanguageTriple{jl,txt,tex,tex}{julia,text,tex,latex}{Julia,Text,\TeX,\LaTeX}