\documentclass{book}
% \input{../../preamble/preamble.tex}
\usepackage[edges]{forest}
\definecolor{folderbg}{RGB}{124,166,198}
\definecolor{folderborder}{RGB}{110,144,169}
\newlength\Size
\setlength\Size{4pt}
\tikzset{%
  folder/.pic={%
    \filldraw [draw=folderborder, top color=folderbg!50, bottom color=folderbg] (-1.05*\Size,0.2\Size+5pt) rectangle ++(.75*\Size,-0.2\Size-5pt);
    \filldraw [draw=folderborder, top color=folderbg!50, bottom color=folderbg] (-1.15*\Size,-\Size) rectangle (1.15*\Size,\Size);
  },
  file/.pic={%
    \filldraw [draw=folderborder, top color=folderbg!5, bottom color=folderbg!10] (-\Size,.4*\Size+5pt) coordinate (a) |- (\Size,-1.2*\Size) coordinate (b) -- ++(0,1.6*\Size) coordinate (c) -- ++(-4pt,5pt) coordinate (d) -- cycle (d) |- (c) ;
  },
}
\forestset{%
  declare autowrapped toks={pic me}{},
  declare boolean register={pic root},
  pic root=0,
  pic dir tree/.style={%
    for tree={%
      folder,
      font=\sffamily,
      grow'=0,
    },
    before typesetting nodes={%
      for tree={%
        edge label+/.option={pic me},
      },
      if pic root={
        tikz+={
          \pic at ([xshift=\Size].west) {folder};
        },
        align={l}
      }{},
    },
  },
  pic me set/.code n args=2{%
    \forestset{%
      #1/.style={%
        inner xsep=2\Size,
        pic me={pic {#2}},
      }
    }
  },
  ,file tree/.style = {
    ,pic me set={directory}{folder}
    ,pic me set={file}{file}
    ,pic dir tree
    ,pic root
    ,for tree={% folder icons by default; override using file for file icons
      ,directory
      ,fit = band
      ,l sep = 2\Size+2mm
    }
  }
}
\begin{document}
Hi
\ExplSyntaxOn
  \int_new:N \g__Prassble_filetree_current_tree_number_int
  \tl_new:N \g_Prassble_filetree_file_path_tl
  \tl_new:N \g_Prassble_filetree_full_shell_input_tl
  \NewDocumentCommand{\filetree}{ m }{
    \int_incr:N \g__Prassble_filetree_current_tree_number_int
    \tl_set:Ne \g_Prassble_filetree_file_path_tl {
      \tl_if_empty:nTF { #1 }
        { '' }
        { #1 }
    }
    \sys_shell_now:e {bash~file_tree.sh~\tl_if_empty:eTF { \g_Prassble_filetree_file_path_tl } { '' } { \g_Prassble_filetree_file_path_tl }~\int_use:N \g__Prassble_filetree_current_tree_number_int}
    \input{FileTrees/tree_\int_use:N \g__Prassble_filetree_current_tree_number_int.tmp}
  } 

% \makeatletter
%   \NewDocumentCommand{\FileTree}{ s O{} m }{
%     \__Prassble_Input@core:nnnn { #1 } { #2 } { #3 } { \filetree }
%   }
% \makeatother
\ExplSyntaxOff
\begin{center}
  \filetree{some_folder}
  \filetree{../tree}
  \filetree{../../preamble/commands/modified_commands/../../../}
\end{center}
% Here: \CurrentFilePath\\
% \ExplSyntaxOn
% \tl_use:N \g_Prassble_path_to_Prassble_folder_tl
% \ExplSyntaxOff
% \begin{center}
%   \FileTree*{}
% \end{center}
\newpage

\end{document}
