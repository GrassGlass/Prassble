\documentclass[11pt]{book}
\input{../preamble/preamble.tex}

\NewDocumentEnvironment{foo}{ m }{#1 a}{b}
\begin{document}
\begin{code}[autowidth = lower, listing and text]{\TeX}
    Hello \hspace{5cm} there

    I
\end{code}
\begin{code}[autowidth = lower, use comment = {Comment!}]{\TeX}
    Hello
\end{code}
\end{document}