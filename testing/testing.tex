\documentclass{book}
\usepackage[T1]{fontenc}
\usepackage{filetree}
\usepackage{showframe}

\ExplSyntaxOn
\cs_new:Npn \__filetree_remaining_height_on_page_use: {
  \dim_compare:nNnTF { \pagegoal } = { \maxdimen }
    { \dim_eval:n { \textheight } }
    { \dim_eval:n { \pagegoal - \pagetotal } }
}

\NewDocumentCommand{\RemainingHeight}{ }{
  \__filetree_remaining_height_on_page_use:
}
\ExplSyntaxOff

\begin{document}
\ExplSyntaxOn
\iow_new:N \g__filetree_heights_iow
\int_new:N \l__filetree_object_number_int
\seq_new:N \l__filetree_heights_seq
\NewDocumentCommand{\SaveHeight}{ m }{
  \seq_gput_right:Ne \l__filetree_heights_seq { \dim_to_decimal:n { #1 } }
}
\ExplSyntaxOff
\forestset{
  ,file tree/.append style={for tree={l sep=0.8cm}}
}
\begin{forest}
 file tree
 ,tikz+={
  % The bounding box of the forest environment
    \draw[line width=0.07pt] (current bounding box.north west) -- (current bounding box.north east) -- (current bounding box.south east) -- (current bounding box.south west) -- cycle;
    % \path let \p1=($(current bounding box.north)-(current bounding box.south)$) in (current bounding box.east) node[right] {\y1\SaveHeight{\y1}};
  }
 ,for tree={
    ,tikz+={
      \draw[line width=0.07pt] (\forestoption{name}.north west) -- (\forestoption{name}.north east) -- (\forestoption{name}.south east) -- (\forestoption{name}.south west) -- cycle;
      % \node[anchor=west] at (\forestoption{name}.east) {\forestoption{name}};
      \path let \p1=($(current bounding box.north)-(\forestoption{name}.south)$) in (\forestoption{name}.east) node[below right] {\y1\SaveHeight{\y1}};
    }
  }
  [{tree}, continue
    [{\$\&\#{\textbackslash} {\textbar}\_*{\textasciicircum}\@\%{\textlangle}{\textrangle}\{\}\textasciitilde\(+\)-\(=\):;"'`!?.}, file]
    [{FileTrees\_IncludeThis}]
    [{a\_file\_with\_[}, file, tikz+={\gdef\foo{Nope}}]
    [{a\_file\_with\_]}, file, tikz+={\gdef\foo{Code is executed in sequential order of nodes.}}]
    [{a\_file\_with\_][\_[\_]\_[[[}, file]
    [{a\_file\_with\_\{}, file]
    [{a\_file\_with\_\}}, file]
    [{a\_file\_with\_\}\{\_\{\_\}\_\{\{\{}, file]
    [{a\_folder\_with\_'\_and\_"\_yes}, file]
    [{another\_folder}]
    [{basename}, file]
    [{bash.pdf}, file]
    [{bash.tex}, file]
    [{bash\_test.tex}, file]
    [{folder}]
    [{hello.sh}, file]
    [{include\_this}
      [{folder1}]
      [{include\_this.tex}, file]
    ]
    [{some\_folder}, to be continued
      [{tmp.tex}, file, to be continued]
    ]
  ]
  \xdef\ssep{\meaning\forestoption{s sep}}
\end{forest}\par
\meaning\foo\par
\fbox{\texttt{s sep}: \ssep}\par
\makeatletter
\forestset{
  s sep=10pt
}
\fbox{s sep: \UseName{fRsT\forest@cn/s sep} and \forestoption{s sep}}\par
\makeatother
\ExplSyntaxOn
\fbox{\tl_use:N \g__dirtree_old_s_sep_tl }\par
\fbox{ \seq_use:Nn \l__filetree_heights_seq {,} }\par

\str_new:N \l__filetree_total_heights_perl_array_str
\str_set:Ne \l__filetree_total_heights_perl_array_str {
  \seq_use:Nn \l__filetree_heights_seq {, ~}
}
\str_put_left:Ne \l__filetree_total_heights_perl_array_str { \c_space_tl \c_space_tl \c_space_tl \c_space_tl }

\iow_open:Nn \g__filetree_heights_iow { height.pl }
\iow_now:Ne \g__filetree_heights_iow { \c_hash_str !/usr/bin/perl }
\iow_now:Ne \g__filetree_heights_iow { 
  my~
  \c_dollar_str remaining \c_underscore_str height~ =~ \dim_to_decimal:n { \__filetree_remaining_height_on_page_use: }; 
  \iow_newline:
  my ~ \c_atsign_str total_height ~ = ~ (
    \iow_newline:
    \str_use:N \l__filetree_total_heights_perl_array_str
    \iow_newline:
  );
}
\iow_close:N \g__filetree_heights_iow
\ExplSyntaxOff
\fbox{Remaining space on page: \RemainingHeight}
\par
\renewcommand{\fboxsep}{0pt}
\fbox{\parbox[c][\RemainingHeight]{2cm}{}}
\newpage
\RemainingHeight\par
\fbox{\parbox[c][\RemainingHeight]{2cm}{}}
\end{document}
