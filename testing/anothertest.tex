\documentclass[a4paper, 11pt]{book}
\usepackage[skins, breakable]{tcolorbox}
\usepackage{keytheorems}

\tcbset{
    ,mystyle/.style = {}
    ,type in thmgroup/.is choice
        ,type in thmgroup/first/.style = {
            ,sharp corners
            ,rounded corners = northeast
            ,after skip balanced = 0pt
        }
        ,type in thmgroup/middle/.style = {
            ,sharp corners
            ,before skip balanced = 0pt
            ,after skip balanced = 0pt
        }
        ,type in thmgroup/last/.style = {
            ,sharp corners
            ,rounded corners = southeast
            ,before skip balanced = 0pt
        }
        ,type in thmgroup/standalone/.style = {
            ,rounded corners
            ,before skip balanced = 0pt
        }
}

\ExplSyntaxOn
\keys_define:nn { keytheorems/thmuse }
    {
        ,tcb-add                    .code:n     = {
            \tcbset{mystyle/.append~style={#1}}
        }
        ,tcb-append                 .meta:n     = {
            tcb-add = {#1}
        }
    }
\ExplSyntaxOff

\newkeytheoremstyle{foo}{
    tcolorbox-no-titlebar   = {
        skin    = enhanced jigsaw,
        mystyle,
    }
}

\newkeytheorem{definition@inner}
  [
    ,style = foo
    ,name = Definition,
  ]
\NewDocumentEnvironment{definition}{d()O{}}
  {%
    \IfNoValueF{#1}{\tcbset{mystyle/.append style={type in thmgroup=#1}}}%
    \begin{definition@inner}[#2]%
  }
  {\end{definition@inner}}

\makeatletter
\newkeytheorem{theorem@inner}
  [
    ,style = foo
    ,name = Theorem,
    ,sibling = definition@inner,
  ]
\makeatother
\NewDocumentEnvironment{theorem}{d()O{}}
  {%
    \IfNoValueF{#1}{\tcbset{mystyle/.append style={type in thmgroup=#1}}}%
    \begin{theorem@inner}[#2]%
  }
  {\end{theorem@inner}}

\begin{document}
\begin{definition}(first)
    First box
\end{definition}
\begin{definition}(middle)[tcb-add={colframe=red}]
    Second box
\end{definition}
\begin{definition}(last)[note=blub]
    Third box
\end{definition}
\end{document}