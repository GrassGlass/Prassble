\documentclass[11pt, titlepage, a4paper, oneside]{book}
\input{../preamble/preamble}
% \usepackage{showframe}

\begin{document}
\chapter{ModifiedNewTCBListing}
\begin{enumerate}
    \item \codeinline{TeX}{autowidth = title}
    \begin{enumerate}
        \item \codeinline{TeX}{\l__listings_autowidth_title_dim <= \textwidthoutside}
        
        This box should be of width \codeinline{TeX}{\l__listings_autowidth_title_dim}
        \begin{code*}
            [
                % ,Title={\footnotesize smol}
                ,Title=smol
                ,autowidth = title
            ]{\TeX}
            Long short text
        \end{code*}
        \item \codeinline{TeX}{\l__listings_autowidth_title_dim > \textwidthoutside}
        
        This title should break and be of width \codeinline{TeX}{\textwidthoutside}
        \begin{code*}
            [
                ,Title=Super long long long long long long long long long long long long long long long long long long long long title
                ,autowidth = title
            ]{\TeX}
            Long short text
        \end{code*}
    \end{enumerate}
    \item \codeinline{TeX}{autowidth = upper}
    \begin{enumerate}
        \begin{code*}{Julia}
            \xdef\mywidth{\the\textwidth}\mywidth ⵌ\xdef\mywidth{\the\textwidth}ⵌ 
            \mywidth = ⵌ\mywidthⵌ 
        \end{code*}
        \item ~
        \begin{code*}
            [
                ,Title=This should have breaklines enabled
                ,autowidth = upper
            ]{Julia}
            ⵌ\hspace{\mywidth}ⵌ
        \end{code*}
        \item ~
        \begin{code*}
            [
                ,Title=This should have breaklines disabled
                ,autowidth = upper
            ]{Julia}
            ⵌ\hspace{\mywidth+0.00001pt}ⵌ
        \end{code*}
    \end{enumerate}
    \item \codeinline{TeX}{autowidth = lower}
    \begin{enumerate}
        \item \codeinline{TeX}{\l__listings_autowidth_lower_dim >= \eqboxwidth{codeupperwidth\arabic{code}}}
        \begin{code*}
        [=
            ,Title=special title
            ,autowidth = upper %
            ,autowidth = lower
            % ,no number
            ,listing and text
        ]{\TeX}
            Hello\\ hewwo \hspace{10cm} heh
        \end{code*}
        \item \codeinline{TeX}{\l__listings_autowidth_lower_dim < \eqboxwidth{codeupperwidth\arabic{code}}}
        \begin{code*}
        [=
            ,Title=special title
            ,autowidth = lower
            ,no number
            ,listing and text
        ]{\TeX}
            Hello\\ hewwo\\ heh
        \end{code*}
    \end{enumerate}
\end{enumerate}

\end{document}