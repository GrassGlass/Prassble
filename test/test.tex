\ExplSyntaxOn
\AtEndDocument { \benchmark_toc: }
\benchmark_tic:
\ExplSyntaxOff
\documentclass[11pt, titlepage, a4paper, oneside]{book}
\input{../preamble/preamble}
\usepackage{showframe}

\newcounter{codeinput}
\newwrite\tmptextfile
\NewDocumentEnvironment{codeinput}{ O{} m c }{
    \stepcounter{codeinput}%
    \def\tmpfilename{\jobname\arabic{codeinput}.txt}%
    \immediate\openout\tmptextfile=\tmpfilename%
    \def\obeyedline{^^J}
    \immediate\write\tmptextfile{#3}%
    \immediate\closeout\tmptextfile%
    \inputcode*[#1]{\tmpfilename}
}{}

\begin{document}
This file is a compilation of various uses of the listing boxes generated with \codeinline{TeX}{\ModifiedNewTCBListing} and \codeinline{TeX}{\ModifiedNewTCBInputListing}. In this way, robustness checks are performed to ensure they function correctly---as bug-free as possible.
\chapter{ModifiedNewTCBListing}
\input{test_ModifiedNewTCBListing.tex}

\chapter{ModifiedNewTCBInputListing}
\RenewDocumentEnvironment{code*}{ O{} m c }{
    \stepcounter{codeinput}%
    \def\tmpfilename{\jobname\arabic{codeinput}.txt}%
    \immediate\openout\tmptextfile=\tmpfilename%
    \def\obeyedline{^^J}
    \immediate\write\tmptextfile{#3}%
    \immediate\closeout\tmptextfile%
    \inputcode*[#1]{\tmpfilename}
}{}
\input{test_ModifiedNewTCBListing.tex}



\end{document}