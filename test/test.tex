\ExplSyntaxOn
\AtEndDocument { \benchmark_toc: }
\benchmark_tic:
\ExplSyntaxOff
\documentclass[11pt, titlepage, a4paper, oneside]{book}
\input{../preamble/preamble}
\usepackage{showframe}

\begin{document}
\chapter{ModifiedNewTCBListing}
\section{One Autowidth Option Selected}
\begin{enumerate}
    \item \codeinline{TeX}{autowidth = title}
    \begin{enumerate}
        \item \codeinline{TeX}{\l__listings_autowidth_title_dim <= \linewidthoutside}
        
        This box should be of width \codeinline{TeX}{\l__listings_autowidth_title_dim}
        \begin{code*}
            [
                % ,Title={\footnotesize smol}
                ,Title=smol
                ,autowidth = title
            ]{\TeX}
            Long short text
        \end{code*}
        \item \codeinline{TeX}{\l__listings_autowidth_title_dim > \linewidthoutside}
        
        This title should break and be of width \codeinline{TeX}{\linewidthoutside}
        \begin{code*}
            [
                ,Title=Super long long long long long long long long long long long long long long long long long long long long title
                ,autowidth = title
            ]{\TeX}
            Long short text
        \end{code*}
    \end{enumerate}
    \item \codeinline{TeX}{autowidth = upper}
    \begin{enumerate}
        \begin{code*}{Julia}
            \xdef\mywidth{\the\linewidth}\mywidth ⵌ\xdef\mywidth{\the\linewidth}ⵌ 
            \mywidth = ⵌ\mywidthⵌ 
        \end{code*}
        \item ~
        \begin{code*}
            [
                ,Title=This should have breaklines disabled
                ,autowidth = upper
            ]{Julia}
            ⵌ\hspace{\mywidth}ⵌ
        \end{code*}
        \item ~
        \begin{code*}
            [
                ,Title=This should have breaklines enabled
                ,autowidth = upper
            ]{Julia}
            ⵌ\hspace{\mywidth+0.00001pt}ⵌ
        \end{code*}
    \end{enumerate}
    \item \codeinline{TeX}{autowidth = lower}
    \begin{enumerate}
        \item \codeinline{TeX}{\l__listings_autowidth_lower_dim >= \eqboxwidth{codeupperwidth\arabic{code}}}
        
        The following box should have width equal to the linewidth.
        \begin{code*}
        [=
            ,width=346.68253pt
            ,autowidth = lower
            % ,no number
            ,listing and text
        ]{\TeX}
            Hello\\ hewwo \hspace{10cm} heh
        \end{code*}
        \item \codeinline{TeX}{\l__listings_autowidth_lower_dim >= \eqboxwidth{codeupperwidth\arabic{code}}}
        
        The following box should have width equal to the width of the \codeinline{TeX}{\tcblower}
        \begin{code*}
        [=
            ,Title=Long long long long long long long long long long long title 
            ,width=346.68253pt
            ,autowidth = lower
            % ,no number
            ,listing and text
        ]{\TeX}
            Hello\\ hewwo \hspace{5cm} heh
        \end{code*}
        \item \codeinline{TeX}{\l__listings_autowidth_lower_dim < \eqboxwidth{codeupperwidth\arabic{code}}}
        
        The following box should have width equal to that of the \codeinline{TeX}{\tcblower}.
        \begin{code*}
        [=
            ,autowidth = lower
            ,no number
            ,listing and text
        ]{\TeX}
            Hello\\ hewwo\\ heh
        \end{code*}
    \end{enumerate}
\end{enumerate}
%
\section{Two Autowidth Options Selected}
\begin{enumerate}
    \item \codeinline{TeX}{autowidth = title + upper}
    \begin{enumerate}
        \item \codeinline{TeX}{\l__listings_autowidth_title_dim <= \linewidthoutside}
        
        This box should be of width \codeinline{TeX}{\l__listings_autowidth_title_dim}
        \begin{code*}
            [
                % ,Title={\footnotesize smol}
                ,Title=smol
                ,autowidth = title
                ,autowidth = upper
            ]{\TeX}
            Long short text
        \end{code*}
        \item \codeinline{TeX}{\l__listings_autowidth_title_dim > \linewidthoutside}
        
        This title should break and be of width \codeinline{TeX}{\linewidthoutside}
        \begin{code*}
            [
                ,Title=Super long long long long long long long long long long long long long long long long long long long long title
                ,autowidth = title
                ,autowidth = upper
            ]{\TeX}
            Long short text
        \end{code*}
        \item 
        \begin{enumerate}
            \item ~
            \begin{code*}{Julia}
                \xdef\mywidth{\the\linewidth}\mywidth ⵌ\xdef\mywidth{\the\linewidth}ⵌ 
                \mywidth = ⵌ\mywidthⵌ 
            \end{code*}
            \item ~
            \begin{code*}
                [
                    ,Title=This should have breaklines disabled
                    ,autowidth = title
                    ,autowidth = upper
                ]{Julia}
                ⵌ\hspace{\mywidth}ⵌ
            \end{code*}
            \begin{code*}
                [
                    ,Title=This should also have breaklines disabled
                    ,OTitle=But the title should break
                    ,autowidth = title
                    ,autowidth = upper
                ]{Julia}
                ⵌ\hspace{\mywidth}ⵌ
            \end{code*}
            \item ~
            \begin{code*}
                [
                    ,Title=This should have breaklines enabled
                    ,autowidth = title
                    ,autowidth = upper
                ]{Julia}
                ⵌ\hspace{\mywidth+0.00001pt}ⵌ
            \end{code*}

            \begin{code*}
                [
                    ,Title=This should also have breaklines disabled
                    ,OTitle=But the title should break
                    ,autowidth = title
                    ,autowidth = upper
                ]{Julia}
                ⵌ\hspace{\mywidth+0.00001pt}ⵌ
            \end{code*}
        \end{enumerate}
    \end{enumerate}
    \item \codeinline{TeX}{autowidth = title + lower}
    \begin{enumerate}
        \item \codeinline{TeX}{\l__listings_autowidth_title_dim <= \linewidthoutside}
        
        This box should be of width \codeinline{TeX}{\l__listings_autowidth_title_dim}
        \begin{code*}
            [
                % ,Title={\footnotesize smol}
                ,Title=smol
                ,autowidth = title
                ,autowidth = upper
            ]{\TeX}
            Long short text
        \end{code*}
        \item \codeinline{TeX}{\l__listings_autowidth_title_dim > \linewidthoutside}
        
        This title should break and be of width \codeinline{TeX}{\linewidthoutside}
        \begin{code*}
            [
                ,Title=Super long long long long long long long long long long long long long long long long long long long long title
                ,autowidth = title
                ,autowidth = upper
            ]{\TeX}
            Long short text
        \end{code*}
        \item \codeinline{TeX}{\l__listings_autowidth_lower_dim >= \eqboxwidth{codeupperwidth\arabic{code}}}
        
        The following box should have width equal to the linewidth.
        \begin{code*}
        [=
            ,width=346.68253pt
            ,autowidth = title
            ,autowidth = lower
            ,listing and text
        ]{\TeX}
            Hello\\ hewwo \hspace{10cm} heh
        \end{code*}
        \item 
        \begin{tabular}[t]{rcl}
            \codeinline{TeX}{\l__listings_autowidth_title_dim} &\codeinline{TeX}{>=} & \codeinline{TeX}{\l__listings_autowidth_lower_dim}\\
            &\codeinline{TeX}{>=} & \codeinline{TeX}{\eqboxwidth{codeupperwidth\arabic{code}}}
        \end{tabular}
        
        The following box should have width equal to the width of the title
        \begin{code*}
        [=
            ,Title=Long long long long long long long long long title 
            ,width=346.68253pt
            ,autowidth = title
            ,autowidth = lower
            ,listing and text
        ]{\TeX}
            Hello\\ hewwo \hspace{5cm} heh
        \end{code*}
        \item \codeinline{TeX}{\l__listings_autowidth_lower_dim < \eqboxwidth{codeupperwidth\arabic{code}}}
        
        The following box should have width equal to that of the \codeinline{TeX}{\tcblower}.
        \begin{code*}
        [=
            ,autowidth = title
            ,autowidth = lower
            ,no number
            ,listing and text
        ]{\TeX}
            Hello\\ hewwo\\ heh
        \end{code*}
    \end{enumerate}
    \item \codeinline{TeX}{autowidth = upper + lower}
    \begin{enumerate}
        \begin{code*}{Julia}
            \xdef\mywidth{\the\linewidth}\mywidth ⵌ\xdef\mywidth{\the\linewidth}ⵌ 
            \mywidth = ⵌ\mywidthⵌ 
        \end{code*}
        \item ~
        \begin{code*}
            [
                ,Title=This should have breaklines disabled
                ,autowidth = upper
                ,autowidth = lower
            ]{Julia}
            \hspace{\mywidth}
        \end{code*}
        \item ~
        \begin{code*}
            [
                ,Title=This should have breaklines enabled
                ,autowidth = upper
                ,autowidth = lower
            ]{Julia}
            \hspace{\mywidth+0.00001pt}
        \end{code*}
                \item \codeinline{TeX}{\l__listings_autowidth_lower_dim >= \l__listings_autowidth_upper_dim}
        
        The following box should have width equal to the linewidth.
        \begin{code*}
        [=
            ,width=346.68253pt
            ,autowidth = upper
            ,autowidth = lower
            ,listing and text
        ]{\TeX}
            Hello\\ hewwo \hspace{10cm} heh
        \end{code*}
        \item \codeinline{TeX}{\l__listings_autowidth_lower_dim >= \l__listings_autowidth_upper_dim}
        
        The following box should have width equal to the width of the \codeinline{TeX}{\tcblower}
        \begin{code*}
        [=
            ,Title=Long long long long long long long long long long long title 
            ,width=346.68253pt
            ,autowidth = upper
            ,autowidth = lower
            ,listing and text
        ]{\TeX}
            Hello\\ hewwo \hspace{5cm} heh
        \end{code*}
        \item \codeinline{TeX}{\l__listings_autowidth_lower_dim < \l__listings_autowidth_upper_dim}
        
        The following box should have width equal to that of the the width of the upper.
        \begin{code*}
        [=
            ,autowidth = upper
            ,autowidth = lower
            ,no number
            ,listing and text
        ]{\TeX}
            Hello\\ hewwo\\ heh
        \end{code*}
    \end{enumerate}
\end{enumerate}
% 
\section{(All) Three Autowidth Options Selected}
\begin{enumerate}
    \item \codeinline{TeX}{\l__listings_autowidth_upper_dim >= \l__listings_autowidth_ⵌ\textlangle title, lower\textrangleⵌ_dim}
    
    This box should be of width \codeinline{TeX}{\l__listings_autowidth_upper_dim}
    \begin{code*}
        [
            ,Title=smol
            ,autowidth = title
            ,autowidth = upper
            ,autowidth = lower
        ]{\TeX}
        Long short text
    \end{code*}
    \item \codeinline{TeX}{\l__listings_autowidth_lower_dim >= \l__listings_autowidth_ⵌ\textlangle title, upper\textrangleⵌ_dim}
    
    This box should be of width \codeinline{TeX}{\l__listings_autowidth_lower_dim}
    \begin{code*}
        [
            ,Title=smol
            ,autowidth = title
            ,autowidth = upper
            ,autowidth = lower
        ]{\TeX}
        \hspace{10cm}
    \end{code*}
    \item \codeinline{TeX}{\l__listings_autowidth_title_dim >= \l__listings_autowidth_ⵌ\textlangle upper, lower\textrangleⵌ_dim}
    
    This title should break and be of width \codeinline{TeX}{\linewidthoutside}
    \begin{code*}
        [
            ,Title=Super long long long long long long long long long long long title
            ,autowidth = title
            ,autowidth = upper
            ,autowidth = lower
        ]{\TeX}
        Long short text\\
        Test \hspace{8.5cm} testo
    \end{code*}
    \item \codeinline{TeX}{\l__listings_autowidth_title_dim > \linewidthoutside}
    
    This title should break and be of width \codeinline{TeX}{\linewidthoutside}
    \begin{code*}
        [
            ,Title=Super long long long long long long long long long long long long long long long long long long long long title
            ,autowidth = title
            ,autowidth = upper
            ,autowidth = lower
        ]{\TeX}
        Long short text\\
        Test \hspace{10cm} testo
    \end{code*}
    \item ~
    \begin{code*}{Julia}
        \xdef\mywidth{\the\linewidth}\mywidth ⵌ\xdef\mywidth{\the\linewidth}ⵌ 
        \mywidth = ⵌ\mywidthⵌ 
    \end{code*}
    \begin{code*}
        [
            ,Title=This should have breaklines disabled
            ,autowidth = title
            ,autowidth = upper
            ,autowidth = lower
        ]{Julia}
        \hspace{\mywidth}
    \end{code*}
    \item ~
    \begin{code*}
        [
            ,Title=This should have breaklines enabled
            ,autowidth = title
            ,autowidth = upper
            ,autowidth = lower
        ]{Julia}
        \hspace{\mywidth+0.00001pt}
    \end{code*}
\end{enumerate}

\end{document}