\documentclass[11pt, titlepage, a4paper, oneside]{book}
\input{../preamble/preamble}
\usepackage{showframe}

\begin{document}
\chapter{ModifiedNewTCBListing}
\section{One autowidth option selected}
\begin{enumerate}
    \item \codeinline{TeX}{autowidth = title}
    \begin{enumerate}
        \item \codeinline{TeX}{\l__listings_autowidth_title_dim <= \linewidthoutside}
        
        This box should be of width \codeinline{TeX}{\l__listings_autowidth_title_dim}
        \begin{code*}
            [
                % ,Title={\footnotesize smol}
                ,Title=smol
                ,autowidth = title
            ]{\TeX}
            Long short text
        \end{code*}
        \item \codeinline{TeX}{\l__listings_autowidth_title_dim > \linewidthoutside}
        
        This title should break and be of width \codeinline{TeX}{\linewidthoutside}
        \begin{code*}
            [
                ,Title=Super long long long long long long long long long long long long long long long long long long long long title
                ,autowidth = title
            ]{\TeX}
            Long short text
        \end{code*}
    \end{enumerate}
    \item \codeinline{TeX}{autowidth = upper}
    \begin{enumerate}
        \begin{code*}{Julia}
            \xdef\mywidth{\the\linewidth}\mywidth ⵌ\xdef\mywidth{\the\linewidth}ⵌ 
            \mywidth = ⵌ\mywidthⵌ 
        \end{code*}
        \item ~
        \begin{code*}
            [
                ,Title=This should have breaklines disabled
                ,autowidth = upper
            ]{Julia}
            ⵌ\hspace{\mywidth}ⵌ
        \end{code*}
        \item ~
        \begin{code*}
            [
                ,Title=This should have breaklines enabled
                ,autowidth = upper
            ]{Julia}
            ⵌ\hspace{\mywidth+0.00001pt}ⵌ
        \end{code*}
    \end{enumerate}
    \item \codeinline{TeX}{autowidth = lower}
    \begin{enumerate}
        \item \codeinline{TeX}{\l__listings_autowidth_lower_dim >= \eqboxwidth{codeupperwidth\arabic{code}}}
        
        The following box should have width equal to the linewidth.
        \begin{code*}
        [=
            ,width=346.68253pt
            ,autowidth = lower
            % ,no number
            ,listing and text
        ]{\TeX}
            Hello\\ hewwo \hspace{10cm} heh
        \end{code*}
        \item \codeinline{TeX}{\l__listings_autowidth_lower_dim < \eqboxwidth{codeupperwidth\arabic{code}}}
        \begin{code*}
        [=
            ,autowidth = lower
            ,no number
            ,listing and text
        ]{\TeX}
            Hello\\ hewwo\\ heh
        \end{code*}
    \end{enumerate}
\end{enumerate}
%
\section{Two autowidth options selected}
\begin{enumerate}
    \item \codeinline{TeX}{autowidth = title + upper}
    \begin{enumerate}
        \item \codeinline{TeX}{\l__listings_autowidth_title_dim <= \linewidthoutside}
        
        This box should be of width \codeinline{TeX}{\l__listings_autowidth_title_dim}
        \begin{code*}
            [
                % ,Title={\footnotesize smol}
                ,Title=smol
                ,autowidth = title
                ,autowidth = upper
            ]{\TeX}
            Long short text
        \end{code*}
        \item \codeinline{TeX}{\l__listings_autowidth_title_dim > \linewidthoutside}
        
        This title should break and be of width \codeinline{TeX}{\linewidthoutside}
        \begin{code*}
            [
                ,Title=Super long long long long long long long long long long long long long long long long long long long long title
                ,autowidth = title
                ,autowidth = upper
            ]{\TeX}
            Long short text
        \end{code*}
        \item 
        \begin{enumerate}
            \item ~
            \begin{code*}{Julia}
                \xdef\mywidth{\the\linewidth}\mywidth ⵌ\xdef\mywidth{\the\linewidth}ⵌ 
                \mywidth = ⵌ\mywidthⵌ 
            \end{code*}
            \item ~
            \begin{code*}
                [
                    ,Title=This should have breaklines disabled
                    ,autowidth = title
                    ,autowidth = upper
                ]{Julia}
                ⵌ\hspace{\mywidth}ⵌ
            \end{code*}
            \item ~
            \begin{code*}
                [
                    ,Title=This should have breaklines enabled
                    ,autowidth = title
                    ,autowidth = upper
                ]{Julia}
                ⵌ\hspace{\mywidth+0.00001pt}ⵌ
            \end{code*}
        \end{enumerate}
    \end{enumerate}
\end{enumerate}

\end{document}